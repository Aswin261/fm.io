<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Age Calci</title>
    <link rel="icon" href="images/favicon-32x32.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <div class="container">
        <form action="">
            <div class="input-container">
            <label for="date">DAY
            <input type="number" name="date" id="date" placeholder="DD">
            <span id="date-error"></span>
        </label>
        <label for="month">MONTH
            <input type="number" name="month" id="month" placeholder="MM">
            <span id="month-error"></span>
        </label>
        <label for="year">YEAR
            <input type="number" name="year" id="year" placeholder="YYYY">
            <span id="year-error"></span>
        </label>
    </div>
        <div class="part">
            <div class="line"></div>
            <button type="submit"><img src="./arrow.svg" alt=""></button>
        </div>
        </form>
        <div class="calc">
            <p><span id="age-year"></span> years</p>
            <p><span id="age-month"></span> months</p>
            <p><span id="age-date"></span> days</p>
        </div>
    </div>
    <script>
        const date = document.getElementById("date");
        const month = document.getElementById("month");
        const year = document.getElementById("year");
        const date_error = document.getElementById("date-error");
        const month_error = document.getElementById("month-error");
        const year_error = document.getElementById("year-error");
        const label=document.querySelectorAll("label");
        const curr = new Date();
        const form=document.querySelector("form");
        date_error.innerHTML=""
        month_error.innerHTML=""
        year_error.innerHTML=""
        dyear=document.getElementById("age-year");
        dmonth=document.getElementById("age-month");
        ddate=document.getElementById("age-date");
        dyear.innerText="--"
        dmonth.innerText="--"
        ddate.innerText="--"

        form.addEventListener('submit', (e) => {
        if (date.value > 31||month.value > 12||year.value > curr.getFullYear()) {
            console.log("invalid date");
            label.forEach((label)=>{
                label.classList.add("active")
                if(date.value>31){
                    date_error.innerText = "Must be a valid day";
                }
               if(month.value>12){
                month_error.innerText = "Must be a valid month";
               }
                if(year.value>curr.getFullYear()){
                    year_error.innerText = "Must be in the past";
                }
                if(date.value>31 && month.value>12 && year.value>curr.getFullYear()){
                    date_error.innerText = "Must be a valid day";
                    month_error.innerText = "Must be a valid month";
                    year_error.innerText = "Must be in the past";
                }
               
            })
            setTimeout(()=>{
                label.forEach((label)=>{
                    label.classList.remove("active");
                    date_error.innerText = "";
                 month_error.innerText = "";
                year_error.innerText = "";
                })
        },3000)
            e.preventDefault();
        }
        else if(date.value==""||month.value==""||year.value==""){
            label.forEach((label)=>{
                label.classList.add("active")
                date_error.innerText = "This field is required";
                 month_error.innerText = "This field is required";
                year_error.innerText = "This field is required";
            })
            setTimeout(()=>{
                label.forEach((label)=>{
                    label.classList.remove("active");
                    date_error.innerText = "";
                 month_error.innerText = "";
                year_error.innerText = "";
                })
        },1000)
            e.preventDefault();
        }
        else{
            let by=year.value
            let bm=month.value
            let bd=date.value
            let cd=curr.getDate()
            let cm=curr.getMonth()
            let cy=curr.getFullYear()
            
        let years = cy - by;
        let months = cm - bm;
        let days = cd - bd;

        if (days < 0) {
            months--;
            days += new Date(cy, cm - 1, 0).getDate();
            // console.log(new Date(cy,cm-1,0).getDate(),cm-1)
        }

        if (months < 0) {
            years--;
            months += 12;
        }

        ddate.innerText = days;
        dmonth.innerText = months;
        dyear.innerText = years;
            e.preventDefault();
        }
       
    });
    </script>
</body>
</html>